# 分布式主键

在分布式系统中，我们不能设置主键为自动增长，因为不同的表中，会产生重复的主键，所以常用的作法是使用UUID来作为主键，这样可以保证不重复

但是我们有的时候要求主键的生成是有序的，因为我们这样可以对数据进行一些排序处理。所以bigsql提供了分布式主键的功能，提供了有序的一个long类型的主键

## snowflake

bigsql采用的是推特开源的一个分布式主键生成算法，可以在没有中心节点的情况下，生成一个64位的整型，我们可以在配置文件中设置指定的列为分布式主键

使用方法如下，进入逻辑表的规则配置，找到``properties``标签，添加下面的内容：

```xml
<property>
    <key>incrementColumn</key>
    <!-- 我们可以添加多个列 -->
    <value>columnName0,columnName1</value>
</property>
```

::: tip 提示
snowflake生成的是一个有序，但是不连续的64位整数，java的long类型刚好可以接收，其它语言请使用合适的数据类型，同时数据库中，该列需要能存储18个长度的整数
:::

::: tip 扩展
其实不仅仅是主键，我们任意一个列，都可以使用自增长的方式。

如果insert语句中已经指定了该列的值，那么分布式主键的策略将会不生效，使用SQL语句中指定的值为准。
:::

最后，感谢推特公司开源的snowflake